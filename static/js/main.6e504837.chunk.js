(this.webpackJsonpscreener=this.webpackJsonpscreener||[]).push([[0],{22:function(e,t,a){},23:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n,r,c,s,l,i,o,j,u,b,O,d=a(1),h=a.n(d),v=a(14),f=a.n(v),p=(a(22),a(3)),x=(a(23),a(4)),g=a(5),m=g.a.textarea(n||(n=Object(x.a)(["\n    height:100px;\n"]))),A=g.a.button(r||(r=Object(x.a)(["\n    width:10%;\n    margin:10px 0 0 0;    \n"]))),D=g.a.div(c||(c=Object(x.a)(["\n    width:100%;\n    display:flex;\n    flex-direction:column;\n"]))),_=g.a.div(s||(s=Object(x.a)(["\nmargin: 5px 0 0 0;\ninput{\n    margin:0 5px 0 5px;\n}\nlabel{\n    font-weight:bold;\n    font-size:0.9rem;\n}\n\n"]))),k={ADD_TEXT:"ADD_TEXT",ADD_STOCKS:"ADD_STOCKS",ADD_FILTERS:"ADD_FILTERS",ADD_AVG:"ADD_AVG",ADD_SEARCH:"ADD_SEARCH",UPD_FILTERS:"UPD_FILTERS",UPD_AVG:"UPD_AVG",DELETE_STOCK:"DELETE_STOCK",UPD_HIGH_AVG:"UPD_HIGH_AVG",UPD_LOW_AVG:"UPD_LOW_AVG",UPD_MAX_PER:"UPD_MAX_PER",UPD_STOCKS:"UPD_STOCKS",ADD_TO_COMPARE:"ADD_TO_COMPARE"},C=a(7),T=a(2),E=a(6),F=function(e,t){return(e-t)/t*100},y=function(e){return e.reduce((function(t,a,n){var r={diff:0,val:a};return 0===n?[r]:(r.diff=F(a,e[n-1]),[].concat(Object(E.a)(t),[r]))}),[])},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;e.sort((function(e,t){return e-t}));var r=e.length,c=Math.ceil(r/100*t),s=e.slice(0,c).reverse(),l=e.slice(r-c),i=y(s),o=y(l),j=i.findIndex((function(e){return e.diff>n})),u=o.findIndex((function(e){return e.diff>a})),b=[].concat(Object(E.a)(j>-1?s.slice(j):[]),Object(E.a)(u>-1?l.slice(u):[]));return b},P={txt:"",highAvg:100,lowAvg:100,maxPer:10,stocks:[],filtersList:[],average:{},searchParams:{},filtersCnt:0,compare:[]},L=function(e,t){var a,n=t.type,r=t.data;switch(n){case"ADD_TEXT":return Object(T.a)(Object(T.a)({},e),{},{txt:r.txt});case"ADD_STOCKS":var c=function(e){try{var t=JSON.parse(e);return Array.isArray(t)||(t=[t]),t}catch(a){alert("Invlaid JSON")}}(e.txt);return Object(T.a)(Object(T.a)({},e),{},(a={stocks:c,filtersList:[]},Object(C.a)(a,"filtersList",[]),Object(C.a)(a,"average",{}),Object(C.a)(a,"searchParams",{}),Object(C.a)(a,"filtersCnt",0),a));case"ADD_FILTERS":var s=function(e){return(null===e||void 0===e?void 0:e.length)?Object.keys(e[0].filters).map((function(e){return{label:e,value:"",operator:"",checked:!1,exclude:[]}})):[]}(e.stocks);return Object(T.a)(Object(T.a)({},e),{},{filtersList:s});case"ADD_AVG":var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;if(Array.isArray(e)&&(null===e||void 0===e?void 0:e.length)){var r={},c={};return e.forEach((function(e){var t=e.filters;Object.keys(t).forEach((function(e){var a,n,s,l=parseFloat((null===(a=r[e])||void 0===a?void 0:a.val)||0)+parseFloat(t[e]||0),i=""!=t[e]?((null===(n=r[e])||void 0===n?void 0:n.len)||0)+1:null===(s=r[e])||void 0===s?void 0:s.len;""!=t[e]&&(c[e]=(c[e]||[]).concat(parseFloat(t[e]))),r[e]={val:l,len:i}}))})),Object.keys(c).forEach((function(e){c[e].sort((function(e,t){return e-t}));var s=S(c[e],t,a,n);s.forEach((function(t){r[e].val-=t,r[e].len--})),r[e].rm=s})),r}}(e.stocks,e.maxPer,e.highAvg,e.lowAvg);return Object(T.a)(Object(T.a)({},e),{},{average:l});case"ADD_SEARCH":var i=function(e){var t=0,a=e.reduce((function(e,a){if(a.checked){t++;var n=Object(C.a)({},a.label,{value:a.value,operator:a.operator});return Object(T.a)(Object(T.a)({},e),n)}return e}),{});return{cnt:t,searchObj:a}}(e.filtersList),o=i.cnt,j=i.searchObj;return Object(T.a)(Object(T.a)({},e),{},{searchParams:j,filtersCnt:o});case"UPD_FILTERS":var u=function(e,t,a,n){var r=Object(E.a)(e);return r[t][a]=n,r}(e.filtersList,r.key,r.col,r.value);return Object(T.a)(Object(T.a)({},e),{},{filtersList:u});case"UPD_AVG":var b=function(e){var t=e.updType,a=e.filter,n=e.num,r=e.average,c=parseFloat(n)||0,s=JSON.parse(JSON.stringify(r));return s[a].val="sub"===t?s[a].val-c:parseFloat(s[a].val)+c,s[a].len="sub"===t?s[a].len-1:parseFloat(s[a].len)+1,s}(Object(T.a)(Object(T.a)({},r),{},{average:e.average}));return Object(T.a)(Object(T.a)({},e),{},{average:b});case"DELETE_STOCK":var O=function(e,t){return[].concat(Object(E.a)(t.slice(0,e)),Object(E.a)(t.slice(e+1)))}(r.key,e.stocks);return Object(T.a)(Object(T.a)({},e),{},{stocks:O});case"UPD_HIGH_AVG":return Object(T.a)(Object(T.a)({},e),{},{highAvg:r.value});case"UPD_LOW_AVG":return Object(T.a)(Object(T.a)({},e),{},{lowAvg:r.value});case"UPD_MAX_PER":return Object(T.a)(Object(T.a)({},e),{},{maxPer:r.value});case"UPD_STOCKS":return Object(T.a)(Object(T.a)({},e),{},{stocks:r.stocks});case"ADD_TO_COMPARE":return Object(T.a)(Object(T.a)({},e),{},{compare:r.compare});default:return e}},G=a(0),V=Object(d.createContext)({}),w=function(e){var t=e.children,a=Object(d.useReducer)(L,P);return Object(G.jsx)(V.Provider,{value:a,children:t})},I=function(){return Object(d.useContext)(V)},U=function(){var e=I(),t=Object(p.a)(e,2),a=t[0],n=t[1],r=a.txt,c=function(e){var t=e.target.value,a=e.target.name;n({data:{value:t},type:"highAvg"===a?k.UPD_HIGH_AVG:"maxPer"===a?k.UPD_MAX_PER:k.UPD_LOW_AVG})};return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(D,{children:[Object(G.jsx)(m,{value:r,onChange:function(e){var t=e.target.value;n({data:{txt:t},type:k.ADD_TEXT})},placeholder:"Enter your JSON"}),Object(G.jsxs)(_,{children:[Object(G.jsx)("label",{children:"HighAvg"}),Object(G.jsx)("input",{type:"text",name:"highAvg",value:a.highAvg,onChange:c}),Object(G.jsx)("label",{children:"LowAvg"}),Object(G.jsx)("input",{type:"text",name:"lowAvg",value:a.lowAvg,onChange:c}),Object(G.jsx)("label",{children:"Diff"}),Object(G.jsx)("input",{type:"text",name:"maxPer",value:a.maxPer,onChange:c})]}),Object(G.jsx)(A,{onClick:function(){n({type:k.ADD_STOCKS}),n({type:k.ADD_FILTERS}),n({type:k.ADD_AVG})},children:"Add"})]})})},N=function(e){var t=e.handleChange,a=I(),n=Object(p.a)(a,1)[0];return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("select",{name:"value",onChange:t,children:[Object(G.jsx)("option",{value:"",children:"Select"}),n.filtersList.map((function(e){return Object(G.jsx)("option",{value:e.label,children:e.label})}))]})})},R=function(e){var t=e.rowNum,a=e.label,n=e.value,r=e.checked,c=I(),s=Object(p.a)(c,2),l=s[0],i=s[1],o=Object(d.useState)(!1),j=Object(p.a)(o,2),u=j[0],b=j[1],O=function(e){var n=e.target.value,c=e.target.name;"checked"===c&&(n=!r),"operator"===c&&(b("GT"===n||"LT"===n),i("GTA"===n||"LTA"===n?{type:k.UPD_FILTERS,data:{key:t,col:"value",value:Math.round(l.average[a].val/l.average[a].len)}}:{type:k.UPD_FILTERS,data:{key:t,col:"value",value:""}})),i({type:k.UPD_FILTERS,data:{key:t,col:c,value:n}}),"operator"!==c&&"value"!==c||!n||i({type:k.UPD_FILTERS,data:{key:t,col:"checked",value:!0}})};return Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"50%",margin:"10px"},children:[Object(G.jsx)("div",{children:Object(G.jsx)("input",{type:"checkbox",onChange:O,name:"checked",checked:r})}),Object(G.jsxs)("div",{style:{width:"33%"},children:[Object(G.jsx)("label",{children:a}),"\xa0"]}),Object(G.jsx)("div",{style:{width:"33%"},children:Object(G.jsxs)("select",{name:"operator",onChange:O,children:[Object(G.jsx)("option",{value:"",children:"Select"}),Object(G.jsx)("option",{value:">",children:"Greater"}),Object(G.jsx)("option",{value:">=",children:"Greater & Equal"}),Object(G.jsx)("option",{value:"<",children:"Less"}),Object(G.jsx)("option",{value:"<=",children:"Less & equal"}),Object(G.jsx)("option",{value:"!=",children:"Not equal"}),Object(G.jsx)("option",{value:"==",children:"Equal"}),Object(G.jsx)("option",{value:"GT",children:"Greater than"}),Object(G.jsx)("option",{value:"LT",children:"Less than"}),Object(G.jsx)("option",{value:"GTA",children:"Greater than AVG"}),Object(G.jsx)("option",{value:"LTA",children:"Less than AVG"})]})}),Object(G.jsx)("div",{style:{width:"33%"},children:u?Object(G.jsx)(N,{handleChange:O}):Object(G.jsx)("input",{type:"text",placeholder:"Value",name:"value",value:n,onChange:O,autoComplete:"off"})})]})},M=function(){var e=I(),t=Object(p.a)(e,2),a=t[0],n=t[1];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h5",{children:"Filters:"}),Object(G.jsxs)("div",{className:"filters",children:[a.filtersList.map((function(e,t){return Object(G.jsx)(R,{label:e.label,operator:e.operator,value:e.value,checked:e.checked,rowNum:t},t)})),Object(G.jsx)("br",{})]}),Object(G.jsx)(A,{onClick:function(){n({type:k.ADD_SEARCH})},children:"Filter"})]})},H={">":function(e,t){return parseFloat(e)>parseFloat(t)},">=":function(e,t){return parseFloat(e)>=parseFloat(t)},"<":function(e,t){return parseFloat(e)<parseFloat(t)&&e>=0},"<=":function(e,t){return parseFloat(e)<=parseFloat(t)&&e>=0},"!=":function(e,t){return parseFloat(e)!=parseFloat(t)},"==":function(e,t){return parseFloat(e)==parseFloat(t)},GT:function(e,t){return parseFloat(e)>=parseFloat(t)},LT:function(e,t){return parseFloat(e)<=parseFloat(t)},GTA:function(e,t){return parseFloat(e)>=parseFloat(t)},LTA:function(e,t){return parseFloat(e)<=parseFloat(t)&&e>=0}},B=(g.a.table(l||(l=Object(x.a)(["\nborder:1px solid;\n"]))),g.a.div(i||(i=Object(x.a)(["\n    background: skyblue;\n    border-radius:50%;\n    font-size:9px;\n"])))),K=(g.a.th(o||(o=Object(x.a)([""]))),g.a.th(j||(j=Object(x.a)([""]))),{ABOVE_NINTY:{background:"green",color:"rgb(255,255,255)"},ABOVE_EIGHTY:{background:"lightgreen",color:"rgb(255,255,255)"},ABOVE_SEVENTY:{background:"skyblue",color:"rgb(255,255,255)"},ABOVE_SIXTY:{background:"orange",color:"rgb(255,255,255)"},ABOVE_FIFTY:{background:"yellow",color:"rgb(255,255,255)"},BELOW_FIFTY:{background:"red",color:"rgb(255,255,255)"}}),Y=(a(27),function(e){var t=e.stocks,a=e.average,n=e.dispatch,r=Object(d.useState)(!1),c=Object(p.a)(r,2),s=c[0],l=c[1],i=t[0].filters,o=Object.keys(i),j=function(e){var a=JSON.parse(JSON.stringify(t));a.sort((function(t,a){return s?a.filters[e]-t.filters[e]:t.filters[e]-a.filters[e]})),l(!s),n({type:k.UPD_STOCKS,data:{stocks:a}})};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("th",{children:"StockName"}),o.map((function(e){return Object(G.jsxs)("th",{onClick:j.bind(null,e),children:[e,Object(G.jsx)(B,{children:Math.round(a[e].val/a[e].len)})]})})),Object(G.jsx)("th",{children:"Matches"}),Object(G.jsx)("th",{children:"Action"})]})}),X=function(e){var t=e.name,a=e.value,n=e.onChange,r=e.average[t].rm,c=!(""!==a&&!r.includes(parseFloat(a))),s=Object(d.useState)(c),l=Object(p.a)(s,2),i=l[0],o=l[1];Object(d.useEffect)((function(){var e=!(""!==a&&!r.includes(parseFloat(a)));o(e)}),Object(E.a)(r));return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("input",{type:"checkbox",name:t,value:a,onChange:function(e){o(!i),n(e)},checked:i})})},J=function(e){var t=e.stock,a=e.rowNum,n=e.average,r=e.filtersCnt,c=e.searchParams,s=e.compare,l=e.dispatch,i=t.Name,o=t.filters,j=Object.keys(o),u=Object(d.useState)(!1),b=Object(p.a)(u,2),O=b[0],h=b[1],v=0,f=function(e){var t=e.target,a=t.checked,n=t.value,r=t.name;l({type:k.UPD_AVG,data:{updType:a?"sub":"add",filter:r,num:n}})};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("td",{className:O?"highlight":"",children:[Object(G.jsx)("input",{type:"checkbox",onChange:function(){var e=Object(E.a)(s);if(O){var t=e.indexOf(a);t>=0&&(e=[].concat(Object(E.a)(e.slice(0,t)),Object(E.a)(e.slice(t+1))))}else e.push(a),console.log(a);h(!O),l({type:k.ADD_TO_COMPARE,data:{compare:e}})}}),i]}),j.map((function(e,t){var a=function(e){var t=c[e];if(t&&H[t.operator]){var a="LT"===t.operator||"GT"===t.operator?o[t.value]||0:t.value,n=H[t.operator](o[e],a)?"greenCol":"redCol";return"greenCol"===n&&v++,n}}(e)||"";return Object(G.jsxs)("td",{className:"".concat(a," ").concat(O?"highlight":""),children:[Object(G.jsx)(X,{name:e,value:o[e],average:n,onChange:f}),o[e]]})})),Object(G.jsx)("td",{className:O?"highlight":"",style:function(e){if(!(r<=0)){var t=e/r*100;return t>=90?K.ABOVE_NINTY:t>=80?K.ABOVE_EIGHTY:t>=70?K.ABOVE_SEVENTY:t>=60?K.ABOVE_SIXTY:t>=50?K.ABOVE_FIFTY:K.BELOW_FIFTY}}(v),children:v}),Object(G.jsx)("td",{children:Object(G.jsx)("button",{onClick:function(e){l({type:k.DELETE_STOCK,data:{key:e}}),l({type:k.ADD_AVG})}.bind(null,a),children:"Delete"})})]})},W=function(e){return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)("tr",{children:Object(G.jsx)(J,Object(T.a)({},e))})})},q=function(e){var t=e.average,a=e.stocks,n=e.filtersCnt,r=e.searchParams,c=e.compare,s=e.dispatch;return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("table",{border:"1",children:[Object(G.jsx)("thead",{children:Object(G.jsx)("tr",{children:Object(G.jsx)(Y,{average:t,stocks:a,dispatch:s})})}),Object(G.jsx)("tbody",{children:a.map((function(e,a){return Object(G.jsx)(W,{stock:e,compare:c,rowNum:a,average:t,filtersCnt:n,searchParams:r,dispatch:s})}))}),Object(G.jsx)("thead",{children:Object(G.jsx)("tr",{bold:"1",children:Object(G.jsx)(Y,{average:t,stocks:a,dispatch:s})})})]})})},z=function(){var e=I(),t=Object(p.a)(e,2),a=t[0],n=t[1];return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(q,{average:a.average,stocks:a.stocks,dispatch:n,filtersCnt:a.filtersCnt,searchParams:a.searchParams,compare:a.compare})})},Q=function(e){var t=e.precentages;return Object(G.jsx)("table",{style:{width:"10rem",textAlign:"left"},children:t.map((function(e){return Object(G.jsxs)("tr",{children:[Object(G.jsx)("td",{children:e.val}),Object(G.jsxs)("td",{children:[Math.round(e.diff),"%"]})]})}))})},Z=function(e){var t=e.label,a=Object(d.useState)(""),n=Object(p.a)(a,2),r=n[0],c=n[1],s=Object(d.useState)([]),l=Object(p.a)(s,2),i=l[0],o=l[1],j=r.split(/\s|%/).filter((function(e){return e})).map((function(e){return e.split(",").join("")}));return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)("div",{style:{margin:"0 20px 0 0"},children:[Object(G.jsx)("h6",{children:t}),Object(G.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)}}),Object(G.jsx)("button",{onClick:function(){var e=j.reduce((function(e,t,a){var n={diff:0,val:t};return 0===a?[n]:(n.diff=F(t,j[a-1]),[].concat(Object(E.a)(e),[n]))}),[]);o(e)},children:"Calc"}),Object(G.jsx)(Q,{precentages:i})]})})},$=function(){var e=Object(d.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1];return Object(G.jsxs)("div",{children:[Object(G.jsx)("h5",{children:"Calculate Diff:"}),Object(G.jsx)("button",{onClick:function(){var e=prompt("Enter diff name");e&&n([].concat(Object(E.a)(a),[{CmpName:Z,label:e}]))},children:"Add"}),Object(G.jsx)("div",{style:{display:"flex",width:"90%",flexWrap:"wrap"},children:a.map((function(e){var t=e.CmpName,a=e.label;return Object(G.jsx)(t,{label:a})}))})]})},ee=g.a.div(u||(u=Object(x.a)(["\nmargin:40px;\nposition:relative;\n"]))),te=g.a.div(b||(b=Object(x.a)(["\n    position:absolute;\n    top:0;    \n    width:auto;\n    height:auto;\n    background:white;\n\n"]))),ae=g.a.div(O||(O=Object(x.a)(["\n"]))),ne=function(e){var t=e.showModal,a=I(),n=Object(p.a)(a,2),r=n[0],c=n[1],s=r.stocks.filter((function(e,t){return r.compare.indexOf(t)>-1}));return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(te,{children:Object(G.jsxs)(ae,{children:[Object(G.jsx)("button",{onClick:t,children:"Close"}),Object(G.jsx)(q,{average:r.average,stocks:s,dispatch:c,filtersCnt:r.filtersCnt,searchParams:r.searchParams,compare:r.compare})]})})})};function re(){var e=I(),t=Object(p.a)(e,1)[0],a=Object(d.useState)(!1),n=Object(p.a)(a,2),r=n[0],c=n[1],s=function(){c(!r)};return Object(G.jsxs)(ee,{children:[Object(G.jsx)(U,{}),t.stocks&&t.stocks.length>0&&Object(G.jsx)(M,{}),t.stocks&&t.stocks.length>0&&Object(G.jsxs)("h5",{children:["Filters added: ",t.filtersCnt]}),t.compare&&t.compare.length>1&&Object(G.jsx)("button",{onClick:s,children:"Compare"}),t.stocks&&t.stocks.length>0&&Object(G.jsx)(z,{}),r&&Object(G.jsx)(ne,{showModal:s}),Object(G.jsx)($,{})]})}var ce=function(){return Object(G.jsx)(w,{children:Object(G.jsx)(re,{})})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,29)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};f.a.render(Object(G.jsx)(h.a.StrictMode,{children:Object(G.jsx)(ce,{})}),document.getElementById("root")),se()}},[[28,1,2]]]);
//# sourceMappingURL=main.6e504837.chunk.js.map